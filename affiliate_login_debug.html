<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Affiliate Login</title>
</head>
<body>
    <h2>Login</h2>
    <input type="email" id="email" placeholder="Enter your email">
    <button onclick="login()">Login</button>

    <script>
        function login() {
            console.log("Login button clicked");
            var email = document.getElementById("email").value;
            console.log("Email entered:", email);

            if (!email) {
                alert("Please enter your email");
                return;
            }

            fetch("https://script.google.com/macros/s/AKfycbwOgNBML186RJ4dvdy_2ieQHwuqaE4ot1lED1MgJYn7/exec?email=" + encodeURIComponent(email))
                .then(response => {
                    console.log("Response received");
                    return response.json();
                })
                .then(data => {
                    console.log("Data received:", data);
                    if (data.status === "success") {
                        window.location.href = data.dashboard; // Redirect to affiliate dashboard
                    } else {
                        alert("Invalid email. Please contact support.");
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                    alert("An error occurred. Please try again later.");
                });
        }
    </script>
</body>
</html>